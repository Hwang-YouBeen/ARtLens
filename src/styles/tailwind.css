@tailwind base;
@tailwind components;
@tailwind utilities;

/* ✅ 루트 체인 높이 확정 */
@layer base {
  html, body, #root { height: 100%; }
  /* ✅ Vite 템플릿이 body에 건 기본 스타일 무력화 */
  body {
    display: block !important;       /* flex → block */
    place-items: unset !important;   /* center → unset */
    min-width: 0 !important;         /* 320px → 0 */
    height: 100% !important;         /* min-height:100vh 대신 높이를 확정 */
  }
}

/* === Google Maps InfoWindow close button tweak === */
.gm-style-iw button.gm-ui-hover-effect {
    opacity: 1 !important;
    right: 6px !important;
    top: 6px !important;
    width: 22px !important;
    height: 22px !important;
    transform: scale(0.85);
    filter: none !important;          /* 어두운 테마에서도 선명 */
    mix-blend-mode: normal !important;
    display: none !important;
  }
  
  .gm-style-iw-c {
    padding-right: 28px !important;   /* 닫기 버튼 자리 확보 */
  }

  :root{
    --nav-h: 70px; /* 탭바 높이 */
    --bottom-safe: calc(var(--nav-h) + env(safe-area-inset-bottom, 0px));
    /* 현재 보이는 뷰포트 높이 (JS에서 채워줌) */
    --vvh: 100svh;
  }
  
  /* iOS 노치 대응 + 100dvh */
  @supports (height: 100dvh) {
    html, body, #root { height: 100dvh; }
  }

  /* Navy base + Gold speckle */
.bg-navy-gold {
    background-color: #0B1220; /* 다크 네이비 */
    background-image:
      radial-gradient(rgba(242,185,80,0.22) 0.8px, transparent 1px),
      radial-gradient(rgba(242,185,80,0.10) 1px, transparent 1.3px),
      radial-gradient(rgba(242,185,80,0.08) 0.6px, transparent 0.9px);
    background-size: 3px 3px, 5px 5px, 7px 7px;
    background-position: 0 0, 1px 2px, 2px 1px;
  }
  
  /* 필요 시, 스펙클을 얕게 하고 싶으면 opacity 느낌으로 덮기 */
  .bg-navy-gold-soft::before {
    content: "";
    position: absolute; inset: 0;
    pointer-events: none;
    background: inherit; /* 위 speckle 복제 */
    opacity: .5;         /* 강도 조절 */
  }


  /* === AR 말풍선 공통 스타일 === */
@layer components {
    .ar-bubble {
      @apply relative max-w-[62vw] px-3 py-2 rounded-2xl 
             bg-white/10 backdrop-blur-md text-white text-[13px] leading-snug
             border border-white/15 shadow-[0_10px_24px_-8px_rgba(0,0,0,.6)];
    }
    /* 금빛 테두리 + 살짝 광택 */
    .ar-bubble--gold {
      box-shadow:
        0 10px 24px -10px rgba(242,185,80,.35),
        inset 0 0 0 1px rgba(255,255,255,.12);
      border-color: rgba(242,185,80,.35);
    }
    /* 말풍선 꼬리(아래쪽) */
    .ar-bubble::after {
      content: "";
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: -9px;
      width: 16px;
      height: 10px;
      clip-path: polygon(50% 100%, 0 0, 100% 0);
      background: inherit;                 /* 본체 배경 이어 받기 */
      border-bottom: 1px solid rgba(255,255,255,.18);
      border-right:  1px solid rgba(255,255,255,.12);
      filter: drop-shadow(0 1px 1px rgba(0,0,0,.35));
    }
    /* 등장 애니메이션 */
    .ar-bubble-appear {
      animation: arPop .22s cubic-bezier(.21,1,.21,1) both;
    }
    @keyframes arPop {
      0%   { transform: translate(-50%,-100%) scale(.86); opacity: 0 }
      100% { transform: translate(-50%,-100%) scale(1);   opacity: 1 }
    }
    /* 텍스트 줄바꿈 & 이모지 살리기 */
    .ar-bubble__text {
      word-break: break-word;
      white-space: pre-wrap;
    }
  }