<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>artlens</title>

    <!-- favicon / theme -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#0B1224" />

    <!-- 성능: wasm 미리 가져오기 -->
    <link rel="preload" href="/opencv/opencv_js.wasm" as="fetch" crossorigin>

    <!-- opencv.js가 wasm을 /opencv/opencv_js.wasm 에서 찾도록 경로 고정 -->
    <script>
      window.Module = {
        locateFile: function (path) {
          if (path.endsWith(".wasm")) return "/opencv/opencv_js.wasm";
          return "/opencv/" + path;
        },
      };
    </script>

    <!-- 로컬 정적 자산에서 OpenCV만 단일 로드 (중복 스크립트 금지) -->
    <script defer src="/opencv/opencv.js"></script>
  </head>
  <body>
    <div id="root"></div>

    <!-- 앱 엔트리 -->
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>